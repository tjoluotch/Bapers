-- MySQL Script generated by MySQL Workbench
-- 04/03/18 07:27:10
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema solsoft_db
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema solsoft_db
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `solsoft_db` DEFAULT CHARACTER SET utf8 ;
USE `solsoft_db` ;

-- -----------------------------------------------------
-- Table `solsoft_db`.`customer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`customer` (
  `account_no` VARCHAR(45) NOT NULL,
  `forename` VARCHAR(45) NULL DEFAULT NULL,
  `surname` VARCHAR(45) NULL DEFAULT NULL,
  `account_holder_name` VARCHAR(45) NULL DEFAULT NULL,
  `address1` VARCHAR(45) NULL DEFAULT NULL,
  `address2` VARCHAR(45) NULL DEFAULT NULL,
  `address3` VARCHAR(45) NULL DEFAULT NULL,
  `city` VARCHAR(45) NULL DEFAULT NULL,
  `postcode` VARCHAR(45) NULL DEFAULT NULL,
  `phone` VARCHAR(45) NULL DEFAULT NULL,
  `valued_customer` TINYINT(1) NULL DEFAULT NULL,
  `discount_type` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`account_no`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`job`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`job` (
  `code` VARCHAR(45) NOT NULL,
  `job_description` VARCHAR(45) NULL,
  `price` FLOAT NULL,
  PRIMARY KEY (`code`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`staff`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`staff` (
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `forename` VARCHAR(45) NULL DEFAULT NULL,
  `surname` VARCHAR(45) NULL DEFAULT NULL,
  `role` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`username`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`task`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`task` (
  `taskID` INT(11) NOT NULL,
  `description` VARCHAR(45) NULL DEFAULT NULL,
  `department` VARCHAR(45) NULL DEFAULT NULL,
  `price` FLOAT NULL DEFAULT NULL,
  `expected_duration` TIME NULL DEFAULT NULL,
  `comments` VARCHAR(100) NULL DEFAULT NULL,
  PRIMARY KEY (`taskID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`order_table`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`order_table` (
  `orderID` INT(11) NOT NULL,
  `account_no` VARCHAR(45) NULL DEFAULT NULL,
  `total_price` FLOAT NULL DEFAULT NULL,
  `payment_status` VARCHAR(45) NULL DEFAULT NULL,
  `date_submitted` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`orderID`),
  INDEX `fk_Order_Customer1_idx` (`account_no` ASC),
  CONSTRAINT `fk_Order_Customer1`
    FOREIGN KEY (`account_no`)
    REFERENCES `solsoft_db`.`customer` (`account_no`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`payment_detail`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`payment_detail` (
  `payment_detailID` VARCHAR(45) NOT NULL,
  `expiry_date` DATE NULL,
  `type` VARCHAR(45) NULL,
  `last4digits` VARCHAR(45) NULL,
  `order_table_orderID` INT(11) NOT NULL,
  PRIMARY KEY (`payment_detailID`),
  INDEX `fk_payment_detail_order_table1_idx` (`order_table_orderID` ASC),
  CONSTRAINT `fk_payment_detail_order_table1`
    FOREIGN KEY (`order_table_orderID`)
    REFERENCES `solsoft_db`.`order_table` (`orderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `solsoft_db`.`job_line`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`job_line` (
  `job_lineID` INT NOT NULL,
  `special instructions` VARCHAR(45) NULL,
  `job_code` VARCHAR(45) NOT NULL,
  `orderID` INT(11) NOT NULL,
  `job_deadline` DATE NULL,
  `payment_detailID` VARCHAR(45) NOT NULL,
  `paid_for` TINYINT(1) NULL,
  `first_reminder` TINYINT(1) NULL,
  PRIMARY KEY (`job_lineID`),
  INDEX `fk_job_line_job1_idx` (`job_code` ASC),
  INDEX `fk_job_line_order_table1_idx` (`orderID` ASC),
  INDEX `fk_job_line_payment_detail1_idx` (`payment_detailID` ASC),
  CONSTRAINT `fk_job_line_job1`
    FOREIGN KEY (`job_code`)
    REFERENCES `solsoft_db`.`job` (`code`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_job_line_order_table1`
    FOREIGN KEY (`orderID`)
    REFERENCES `solsoft_db`.`order_table` (`orderID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_job_line_payment_detail1`
    FOREIGN KEY (`payment_detailID`)
    REFERENCES `solsoft_db`.`payment_detail` (`payment_detailID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `solsoft_db`.`task_line`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `solsoft_db`.`task_line` (
  `task_lineID` INT(11) GENERATED ALWAYS AS () VIRTUAL,
  `taskID` INT(11) NOT NULL,
  `completed_by` VARCHAR(45) NOT NULL,
  `start_time` DATETIME(0) NULL,
  `end_time` DATETIME(0) NULL,
  `shelf` VARCHAR(45) NULL,
  `job_lineID` INT NOT NULL,
  PRIMARY KEY (`task_lineID`),
  INDEX `fk_Job_line_Task1_idx` (`taskID` ASC),
  INDEX `fk_Job_line_Staff1_idx` (`completed_by` ASC),
  UNIQUE INDEX `task_lineID_UNIQUE` (`task_lineID` ASC),
  INDEX `fk_task_line_job_line1_idx` (`job_lineID` ASC),
  CONSTRAINT `fk_Job_line_Staff1`
    FOREIGN KEY (`completed_by`)
    REFERENCES `solsoft_db`.`staff` (`username`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Job_line_Task1`
    FOREIGN KEY (`taskID`)
    REFERENCES `solsoft_db`.`task` (`taskID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_line_job_line1`
    FOREIGN KEY (`job_lineID`)
    REFERENCES `solsoft_db`.`job_line` (`job_lineID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `solsoft_db`.`customer`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`customer` (`account_no`, `forename`, `surname`, `account_holder_name`, `address1`, `address2`, `address3`, `city`, `postcode`, `phone`, `valued_customer`, `discount_type`) VALUES ('ACC0001', 'David', 'Rhind', 'City University', 'Northampton Square', NULL, NULL, 'London', 'EC1V 0HB', '0207 040 8000', NULL, NULL);
INSERT INTO `solsoft_db`.`customer` (`account_no`, `forename`, `surname`, `account_holder_name`, `address1`, `address2`, `address3`, `city`, `postcode`, `phone`, `valued_customer`, `discount_type`) VALUES ('ACC0002', 'Boris', 'Berezovsky', 'AirVia Ltd', '12 Bond Street', NULL, NULL, 'London', 'WC1V 8HU', '0207 321 8523', NULL, NULL);
INSERT INTO `solsoft_db`.`customer` (`account_no`, `forename`, `surname`, `account_holder_name`, `address1`, `address2`, `address3`, `city`, `postcode`, `phone`, `valued_customer`, `discount_type`) VALUES ('ACC0003', 'Alex', 'Wright', 'InfoPharma Ltd', '25 Bond Street', NULL, NULL, 'London', 'WC1V 8LS', '0207 321 8001', NULL, NULL);
INSERT INTO `solsoft_db`.`customer` (`account_no`, `forename`, `surname`, `account_holder_name`, `address1`, `address2`, `address3`, `city`, `postcode`, `phone`, `valued_customer`, `discount_type`) VALUES ('ACC0004', 'Albus', 'Dumbledore', 'Hogwarts', 'Hogwarts School', NULL, NULL, 'Hogsmeade', 'ED4 3YS', '0454 451 5464', NULL, NULL);
INSERT INTO `solsoft_db`.`customer` (`account_no`, `forename`, `surname`, `account_holder_name`, `address1`, `address2`, `address3`, `city`, `postcode`, `phone`, `valued_customer`, `discount_type`) VALUES ('ACC0005', 'Clark', 'Kent', 'Daily Planet', 'Daily Planet', NULL, NULL, 'Metropolis', 'MD5 7GF', '0594 245 6535', NULL, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `solsoft_db`.`job`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('ABN54', '5 x 4 B& W copy negatives', 19);
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('ACN54', '5 x 4 Colour copy negatives', 19);
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('ACT108', '10 x 8 Colour copy transparency', 96);
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('ACT35', '35 mm Colour copy transparency', 20);
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('B108', '10 x 8 processing', 8.3);
INSERT INTO `solsoft_db`.`job` (`code`, `job_description`, `price`) VALUES ('C108', '10 x 8 C41 processing', 8.3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `solsoft_db`.`staff`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('username', 'password', 'forename', 'surname', 'role');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('apask16', 'password', 'Stewart', 'Pask', 'Shift Manager');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('jabbot05', 'password', 'Julie', 'Abbot', 'Office Manager');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('jhash09', 'password', 'John', 'Hash', 'Lab Staff');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('lhong05', 'password', 'Lee', 'Hong', 'Lab Staff');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('mkent01', 'password', 'Martha', 'Kent', 'Technician');
INSERT INTO `solsoft_db`.`staff` (`username`, `password`, `forename`, `surname`, `role`) VALUES ('mscott12', 'password', 'Marina', 'Scott', 'Lab Staff');

COMMIT;


-- -----------------------------------------------------
-- Data for table `solsoft_db`.`task`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (1, 'Use of large copy camera', 'Copy Room', 19, '02:00:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (2, 'Black and white film processing', 'Development area', 49.5, '01:00:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (3, 'Bag up', 'Packing Departments', 6, '00:30:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (4, 'Colour film processing', 'Development Area', 80, '01:30:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (5, 'Colour Transparency processing', 'Development Area', 110.3, '03:00:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (6, 'Use of small copy camera', 'Copy Room', 8.3, '01:15:00', '');
INSERT INTO `solsoft_db`.`task` (`taskID`, `description`, `department`, `price`, `expected_duration`, `comments`) VALUES (7, 'Mount Transparencies', 'Finishing Room', 55.5, '00:45:00', '');

COMMIT;


-- -----------------------------------------------------
-- Data for table `solsoft_db`.`order_table`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`order_table` (`orderID`, `account_no`, `total_price`, `payment_status`, `date_submitted`) VALUES (1245, 'ACC0001', 19, '', '2017-05-05');

COMMIT;


-- -----------------------------------------------------
-- Data for table `solsoft_db`.`task_line`
-- -----------------------------------------------------
START TRANSACTION;
USE `solsoft_db`;
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1001, 1, 'jhash09', '2018/01/13 12:00', '2018/01/13 12:20', NULL, DEFAULT);
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1002, 2, 'lhong05', '2018/01/13 12:30', '2018/01/13 13:10', NULL, DEFAULT);
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1003, 3, 'mscott12', '2018/01/13 13:20', '2018/01/13 13:30', NULL, DEFAULT);
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1004, 1, 'jnash09', '2018/01/13 12:20', '2018/01/13 13:15', NULL, DEFAULT);
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1005, 4, 'lhong05', '2018/01/13 13:10', '2018/01/13 13:50', NULL, DEFAULT);
INSERT INTO `solsoft_db`.`task_line` (`task_lineID`, `taskID`, `completed_by`, `start_time`, `end_time`, `shelf`, `job_lineID`) VALUES (1006, 3, 'jabbot05', '2018/01/13 14:00', '2018/01/13 14:10', NULL, DEFAULT);

COMMIT;

